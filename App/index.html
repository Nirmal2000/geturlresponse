<input type="text" id="1" >
<input type ="button" value="Get response" onclick="getresp()">

<p id="p1"></p>


<script>

function getresp(){
    var xtp = new XMLHttpRequest
    xtp.onreadystatechange = function(){
        if(this.status=404){
            document.getElementById("p1").innerHTML=this.statusText
        }
        if(this.status=200 && this.readyState==4){
            if(this.responseText == "INVALID PROTOCOL"){
                document.getElementById("p1").innerHTML=this.responseText    
            }
            else if(this.responseText){
            document.getElementById("p1").innerHTML=this.responseText
            var btn = document.createElement("button");  
            btn.innerHTML = document.getElementById("1").value;  
            btn.setAttribute("onClick", "file()");                
            document.body.appendChild(btn);}
             else{
                document.getElementById("p1").innerHTML = "INVALID URL"
            }
        }        
    }
    xtp.onerror= function(){
        document.getElementById("p1").innerHTML=this.statusText
    }
    
    xtp.open("get","/url?f="+document.getElementById("1").value)
    xtp.send()
    
}

function file(){
    
    var xtp = new XMLHttpRequest
    xtp.open("get","file?f="+document.getElementById("p1").innerHTML)
    // xtp.open("get","file?url="+)
    xtp.responseType="blob"
    xtp.onload = function (event) {
        var blob = xtp.response;
        var link=document.createElement('a');
        link.href=window.URL.createObjectURL(blob);
        link.download="file.txt";
        link.innerHTML = "LINK"
        link.click();
     };
    xtp.send()
}

</script>